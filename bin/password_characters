#!/usr/bin/env ruby
require 'password_characters'

require 'active_support'
require 'active_support/core_ext/string'

password = if ARGV.any?
             ARGV[0]
           else
             puts 'Enter password:'
             gets
           end

character_ordinals = if ARGV.any?
                       ARGV[1]
                     else
                       puts 'Enter indices:'
                       gets
                     end

def character_ordinals_to_integer_array(character_ordinals)
  character_ordinals.split(',').map(&:to_i)
end

begin
  puts PasswordCharacters::PasswordAndOrdinals.new(password.squish, character_ordinals_to_integer_array(character_ordinals.squish)).characters.join ' '
rescue Exception => e
  abort e.message
end
